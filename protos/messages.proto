syntax = "proto3";


message Address {
  string ip = 1;
  uint32 port = 2;
}

message DeviceInfo {
  string name = 1;
  string state = 2;
  string metadata = 3;
}

message JoinRequest {
  DeviceInfo device_info = 1;
  Address device_address = 2;
}

message JoinReply {
  Address report_address = 1;
  uint32 report_interval = 2;
}

message SensorReading {
  string sensor_name = 1;
  string reading_value = 2;
  string timestamp = 3;
}

enum RequestType {
  REQUESTTYPE_UNSPECIFIED = 0;
  REQUESTTYPE_ACTION = 1;
  REQUESTTYPE_GET_STATE = 2;
  REQUESTTYPE_SET_STATE = 3;
  REQUESTTYPE_GET_METADATA = 4;
  REQUESTTYPE_SET_METADATA = 5;
}

message DeviceRequest {
  RequestType type = 1;
  string key = 2;
  string value = 3;
}

enum Status {
  STATUS_UNSPECIFIED = 0;
  STATUS_OK = 1;
  STATUS_BAD = 2;
  STATUS_FAIL = 3;
  STATUS_DENIED = 4;
  STATUS_UNKNOWN = 5;
}

message DeviceReply {
  Status status = 1;
  string result = 2;
}

syntax = "proto3";


message Address {
  string ip = 1;
  uint32 port = 2;
}

enum DeviceType {
  DT_UNSPECIFIED = 0;
  SENSOR = 1;
  ACTUATOR = 2;
}

message DeviceInfo {
  DeviceType type = 1;
  string name = 2;
  string state = 3;
}

message JoinRequest {
  DeviceInfo device_info = 1;
  Address device_address = 2;
}

message JoinReply {
  Address report_address = 1;
  float report_interval = 2;
}

message SensorReading {
  string sensor_name = 1;
  string reading_value = 2;
  string timestamp = 3;
}

enum RequestType {
  RT_UNSPECIFIED = 0;
  ACTION = 1;
  GET_STATE = 2;
  SET_STATE = 3;
}

message DeviceRequest {
  RequestType type = 1;
  string body = 2;
}

enum ReplyStatus {
  RS_UNSPECIFIED = 0;
  OK = 1;
  TIMEOUT = 2;
  DENIED = 3;
  FAIL = 4;
  BAD_REQUEST = 5;
  UNKNOWN_TYPE = 6;
  UNKNOWN_ACTION = 7;
}

message DeviceReply {
  ReplyStatus status = 1;
  string body = 2;
}
